<head>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
</head>

<script>

window.onload = function() {
    document.getElementById('date').value = new Date().toJSON().slice(0,10);
}

function submitData(hard = 0) {

    var google_url = "deployed webapp, change after deploying and deploy again ;) ";
    var date  = document.getElementById('date').value;
    var km  = document.getElementById('km').value;
    var l = document.getElementById('l').value;
    var warningText = "";
    var control = Math.floor(Math.random() * 99999999);

    if(km.length == 0) warningText += "\nNejsou vyplněné kilometry";
    if(l.length == 0) warningText += "\nLitry nejsou vyplněny";
    if(warningText.length != 0 && !hard) {alert(warningText); return; }

    document.getElementById("statusbar").innerHTML="Odesílám, čekej"
    document.getElementById("statusbar").className = "alert alert-warning";

    var vars = "Nový záznam: " + date + ", " + km + " km, " + l + " l";
    //fetch('telegram_url'+vars);

    fetch(google_url+"?submit=true"+"&km="+km+"&l="+l+"&date="+date+"&control="+control)
        .then(function(response) {
            return response.text().then(function(google_response) {
                if (google_response == control) {
                    document.getElementById("statusbar").innerHTML="Úspěšně odesláno";
                    document.getElementById("statusbar").className = "alert alert-success";
                } else {
                    document.getElementById("statusbar").innerHTML="Chyba! Obnov stránku";
                    document.getElementById("statusbar").className = "alert alert-danger";
                }
            });
        });

}

</script>

<body>

<div style="width: 350px; margin: auto;">
    <div class="alert alert-info" role="alert" id="statusbar" style="text-align: center;">Zapiš<form>

        <div class="input-group">
            <div class="input-group-prepend"><span class="input-group-text" style="width: 100px">Kilometry</span></div>
            <input type="number" class="form-control" id="km" style="max-width: 250px">
        </div>

        <div class="input-group">
            <div class="input-group-prepend"><span class="input-group-text" style="width: 100px">Litry</span></div>
            <input type="number" class="form-control" id="l" style="max-width: 250px">
        </div>

        <div class="input-group">
            <div class="input-group-prepend">
                <span class="input-group-text" style="width: 100px">Datum</span>
            </div>
            <input type="date" class="form-control" id="date" style="max-width: 250px; text-align: center;">
        </div>

        <div class="btn-group" role="group" style="width: 100%">
            <button type="button" class="btn btn-primary" onclick='submitData()' >Uložit</button>
        </div>

    </form></div>
</div>

</body>
